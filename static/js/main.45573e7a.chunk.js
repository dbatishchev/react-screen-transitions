(this["webpackJsonpweb-animations-02"]=this["webpackJsonpweb-animations-02"]||[]).push([[0],[,,,,,,,,,function(t,e,a){t.exports={header:"Header_header__2Oor9",backButton:"Header_backButton__31WVN","fade-in":"Header_fade-in__YjHW-",artistDescription:"Header_artistDescription__Jt2LH","slide-right":"Header_slide-right__lpae1",name:"Header_name__1MB1l",tags:"Header_tags__3qgjW",imageWrapper:"Header_imageWrapper__3VANy","move-image":"Header_move-image__25wRK",headerImage:"Header_headerImage__2BKV5"}},,,,,function(t,e,a){t.exports={track:"Track_track__3Lx9B",image:"Track_image__GwDT_",title:"Track_title__21e0f",album:"Track_album__3hQ1r",duration:"Track_duration__1Ta1Q"}},function(t,e,a){t.exports={artists:"Artists_artists__1C-oa",tiles:"Artists_tiles__3Ai_L",tile:"Artists_tile__2gIui",tileSlideIn:"Artists_tileSlideIn__1T-9S","tile-move":"Artists_tile-move__1AzJJ"}},function(t,e,a){t.exports={trackList:"TrackList_trackList__PALIU",heading:"TrackList_heading__1UEyz",track:"TrackList_track__wPwH1",stagger:"TrackList_stagger__3xh8K"}},function(t,e,a){t.exports={album:"Album_album__11Wlq",image:"Album_image__3ABNo",title:"Album_title__15Slk"}},,,function(t,e,a){t.exports={container:"Content_container__1ZpXd",content:"Content_content__3Mf_X"}},function(t,e,a){t.exports={container:"AlbumList_container__u-AV9",album:"AlbumList_album__33TvW","scale-up":"AlbumList_scale-up__1I8AO"}},,,,,function(t,e,a){t.exports={container:"ArtistDetails_container__3RyKe"}},,,function(t,e,a){t.exports={image:"ArtistPhoto_image__2s33E"}},,,,,,function(t,e,a){},,,,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(10),c=a(0),s=a(12),r=a.n(s),i=(a(35),a(11)),o=a(24),l=a(25),u="https://api.spotify.com",m="v1",d=function(){function t(){Object(o.a)(this,t)}return Object(l.a)(t,null,[{key:"redirectToAuthPage",value:function(){window.location.replace("https://accounts.spotify.com/authorize?scope=user-top-read&response_type=token&client_id=".concat("d0b849ae907a475b90671aa3cb30d7b2","&redirect_uri=").concat(encodeURIComponent("https://dbatishchev.github.io/react-screen-transitions/")))}},{key:"fetchTopArtists",value:function(e){return fetch("".concat(u,"/").concat(m,"/me/top/artists?limit=100&time_range=long_term"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()})).then(t.checkErrors)}},{key:"fetchTopTracks",value:function(e,a){return fetch("".concat(u,"/").concat(m,"/artists/").concat(e,"/top-tracks?country=US"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){return t.json()})).then(t.checkErrors)}},{key:"fetchAlbums",value:function(e,a){return fetch("".concat(u,"/").concat(m,"/artists/").concat(e,"/albums?limit=5"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){return t.json()})).then(t.checkErrors)}},{key:"checkErrors",value:function(t){return t.error&&401===t.error.status&&(localStorage.setItem("token",null),window.location.reload()),t}}]),t}(),j=a(3),_=a(46),b=a(45),h=a(20),f=a.n(h),p=a(1);function O(t){var e=t.children;return Object(p.jsx)("div",{className:f.a.container,children:Object(p.jsx)("div",{className:f.a.content,children:e})})}var x=a(16),k=a.n(x),g=a(14),v=a.n(g);function N(t){var e,a=t/1e3,n=Math.floor(a/60),c=Math.floor(a-60*n);return"".concat(n,":").concat((e=c,String(e<10?"0".concat(e):e)))}function A(t){var e=t.track,a=t.className;return Object(p.jsxs)("div",{className:"".concat(v.a.track," ").concat(a),children:[Object(p.jsx)("img",{className:v.a.image,src:e.album.images[2].url,alt:"".concat(e.name," ").concat(e.album.name)}),Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{className:v.a.title,children:e.name}),Object(p.jsx)("span",{className:v.a.album,children:e.album.name})]}),Object(p.jsx)("span",{className:v.a.duration,children:N(e.duration_ms)})]})}function w(t){var e=t.tracks;return Object(p.jsxs)("div",{className:k.a.trackList,children:[Object(p.jsx)("h2",{className:k.a.heading,children:"Popular"}),Object(p.jsx)("div",{children:e&&e.map((function(t){return Object(p.jsx)(A,{track:t,className:k.a.track},t.id)}))})]})}A.defaultProps={className:""},w.defaultProps={tracks:null};var y=a(21),T=a.n(y),I=a(17),P=a.n(I);function B(t){var e=t.album,a=t.className;return Object(p.jsxs)("div",{className:"".concat(P.a.album," ").concat(a),children:[Object(p.jsx)("img",{className:P.a.image,src:e.images[1].url,alt:e.name}),Object(p.jsx)("span",{className:P.a.title,children:e.name})]})}function E(t){var e=t.albums;return Object(p.jsx)("div",{className:T.a.container,children:e&&e.map((function(t){return Object(p.jsx)(B,{album:t,className:T.a.album},t.id)}))})}B.defaultProps={className:""},E.defaultProps={albums:null};var H=a(9),L=a.n(H);function S(t){var e=t.artist,a=t.onBackClick;return Object(p.jsxs)("div",{className:L.a.header,children:[Object(p.jsx)("span",{className:L.a.backButton,onClick:a,role:"button",tabIndex:0,children:Object(p.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("path",{fill:"#FFF",d:"M24 10.5H5.7l8.4-8.4L12 0 0 12l12 12 2.1-2.1-8.4-8.4H24z"})})}),Object(p.jsx)("div",{className:L.a.imageWrapper,children:Object(p.jsx)("img",{className:L.a.headerImage,src:e.images[0].url,alt:e.name})}),Object(p.jsxs)("div",{className:L.a.artistDescription,children:[Object(p.jsx)("div",{className:L.a.name,children:e.name}),Object(p.jsx)("div",{className:L.a.tags,children:e.genres.join(", ")})]})]})}var C=a(26),W=a.n(C);function z(t){var e=t.artists,a=t.history,s=t.location,r=t.match,i=t.token,o=Object(c.useState)(null),l=Object(n.a)(o,2),u=l[0],m=l[1],j=Object(c.useState)(null),_=Object(n.a)(j,2),b=_[0],h=_[1];Object(c.useEffect)((function(){if(s&&s.state&&s.state.position){var t=s.state.position,e=t.left-100,a=t.top-30;document.documentElement.style.setProperty("--translate-header-image","translate(".concat(e,"px, ").concat(a,"px) scale(0.792)"))}}),[]),Object(c.useEffect)((function(){var t=r.params.id;d.fetchTopTracks(t,i).then((function(t){var e=t.tracks;m(e)})),d.fetchAlbums(t,i).then((function(t){var e=t.items;h(e)}))}),[]),Object(c.useEffect)((function(){s.state&&window.history.replaceState(null,""),window.scrollTo(0,0)}),[]);var f=Object(c.useCallback)((function(){a.push("/",{position:s.state?s.state.position:null,artistId:s.state?s.state.artistId:null})}),[s,a]),x=Object(c.useMemo)((function(){return e?e.find((function(t){return t.id===r.params.id})):null}),[e,r.params.id]);return x?Object(p.jsxs)("div",{className:W.a.container,children:[Object(p.jsx)(S,{artist:x,onBackClick:f}),Object(p.jsxs)(O,{children:[Object(p.jsx)(E,{albums:b}),Object(p.jsx)(w,{tracks:u})]})]}):null}z.defaultProps={artists:null};var M=Object(j.f)(z),D=a(29),J=a.n(D);function R(t){var e=t.artist,a=t.history,n=t.className,s=Object(c.useRef)(null),r=Object(c.useCallback)((function(){var t=s.current,n=t.getBoundingClientRect(),c={left:n.x,top:n.y};a.push("/artist/".concat(e.id),{position:c,artistId:e.id}),t.style.opacity=0}),[e,s.current]);return Object(p.jsx)("img",{className:"".concat(J.a.image," ").concat(n),src:e.images[0].url,onClick:r,ref:s,alt:e.name})}R.defaultProps={className:""};var F=Object(j.f)(R),K=a(15),U=a.n(K);function V(t){var e=t.location,a=t.artists;if(Object(c.useEffect)((function(){if(e&&e.state&&e.state.position&&e.state.artistId){var t=document.documentElement,a=e.state.position,n=a.top,c=-(a.left-100),s=-(n-30);t.style.setProperty("--translate-tile","translate(".concat(c,"px, ").concat(s,"px) scale(1.2632)")),e.state&&window.history.replaceState(null,"")}}),[]),!a)return null;if(0===a.length)return"Nothing Found";var n=e&&e.state?e.state.artistId:null;return Object(p.jsx)("div",{className:U.a.artists,children:Object(p.jsx)("div",{className:U.a.tiles,children:a.map((function(t){return Object(p.jsx)(F,{artist:t,className:"".concat(U.a.tile," ").concat(t.id===n?U.a.tileSlideIn:"")},t.id)}))})})}V.defaultProps={artists:null};var q=Object(j.f)(V);a(42);function Q(t){var e=t.location,a=t.token,s=Object(c.useState)(null),r=Object(n.a)(s,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){a&&d.fetchTopArtists(a).then((function(t){o(t.items)}))}),[]),a?Object(p.jsx)(_.a,{children:Object(p.jsx)(b.a,{timeout:800,classNames:"main",children:Object(p.jsxs)(j.c,{location:e,children:[Object(p.jsx)(j.a,{exact:!0,path:"/",render:function(){return Object(p.jsx)(q,{artists:i,token:a})}}),Object(p.jsx)(j.a,{exact:!0,path:"/artist/:id",render:function(){return Object(p.jsx)(M,{artists:i,token:a})}})]})},e.key)}):null}Q.defaultProps={token:null};var X=Object(j.f)(Q),G=localStorage.getItem("token");if(!G||"null"===G){var Y=window.location.hash.substring(1),Z={};Y.split("&").forEach((function(t){var e=t.split("="),a=Object(n.a)(e,2),c=a[0],s=a[1];Z[c]=s})),(G=Z.access_token)&&localStorage.setItem("token",G),G||d.redirectToAuthPage()}r.a.render(Object(p.jsx)(i.a,{children:Object(p.jsx)(X,{token:G})}),document.getElementById("root"))}],[[43,1,2]]]);
//# sourceMappingURL=main.45573e7a.chunk.js.map